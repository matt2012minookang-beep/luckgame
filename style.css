:root{
  --green:#0b3b1a;
  --blue:#1f5fbf;
  --pink:#ff6fb2;
  --luck:#7a2cff;
}

*{ box-sizing:border-box; }
html,body{ height:100%; margin:0; font-family: "Malgun Gothic", system-ui, -apple-system, Segoe UI, Roboto, Arial; }
#app{ height:100%; width:100%; position:relative; overflow:hidden; }

.hidden{ display:none !important; }

.screen{
  position:absolute; inset:0;
  display:flex; flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  padding-top:84px;
}
.screen-green{ background:var(--green); color:#fff; }
.screen-blue{ background:var(--blue); color:#fff; }
.screen-pink{ background:var(--pink); color:#fff; }

.title{ font-size:64px; margin:60px 0 40px; font-weight:800; }
.h2{ margin:10px 0 30px; font-size:40px; font-weight:800; }

.btn{
  border:0; background:#fff; color:#000;
  padding:10px 18px; border-radius:12px;
  font-weight:800; cursor:pointer;
  box-shadow: 0 2px 0 rgba(0,0,0,.25);
}
.btn:active{ transform: translateY(1px); box-shadow: 0 1px 0 rgba(0,0,0,.25); }
.btn.small{ padding:8px 14px; border-radius:10px; }
.btn.big{ padding:14px 26px; font-size:22px; border-radius:14px; }

.pos-tl{ position:absolute; left:12px; top:12px; }
.pos-ml{ position:absolute; left:12px; top:50%; transform: translateY(-50%); }

.hud{
  position:absolute; top:0; left:0; right:0; height:72px;
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 12px;
  pointer-events:none;
}
.hud *{ pointer-events:auto; }
.hud-right{ display:flex; flex-direction:column; align-items:flex-end; gap:6px; }
.hud-gems{ display:flex; gap:10px; align-items:center; font-size:18px; font-weight:800; }
.hud-luck{ font-size:14px; opacity:.95; }

.main-box{
  margin-top:auto;
  margin-bottom:70px;
  width:min(520px, 92vw);
  height:140px;
  border:3px solid #fff;
  display:flex;
  align-items:center;
  justify-content:space-evenly;
  border-radius:12px;
  background:transparent;
}
.notice{
  position:absolute;
  bottom:18px;
  left:50%;
  transform:translateX(-50%);
  font-size:18px;
  font-weight:800;
  text-align:center;
  min-height:24px;
}

.loadout{
  position:absolute;
  top:120px;
  left:50%;
  transform:translateX(-50%);
  display:flex; align-items:center; gap:10px;
}
.loadout-emoji{ font-size:38px; min-width:44px; text-align:center; }
.loadout-char{
  width:44px; height:44px;
  border:1px solid #fff;
  background:#222;
}
.loadout-text{
  position:absolute;
  top:175px;
  left:50%;
  transform:translateX(-50%);
  font-size:14px;
  font-weight:800;
  opacity:.95;
}

.shop-row, .box-row{
  display:flex;
  gap:22px;
  align-items:center;
  justify-content:center;
  flex-wrap:wrap;
}
.card{
  width:380px; max-width:92vw;
  height:320px;
  border:3px solid #fff;
  border-radius:14px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  padding:18px;
}
.card.clickable{ cursor:pointer; }
.card-title{ font-size:22px; font-weight:900; text-align:center; margin-top:8px; }
.card-sub{ font-size:18px; font-weight:900; margin-top:12px; text-align:center; }
.card-timer{ font-size:14px; margin-top:8px; opacity:.95; }

.emoji.big{ font-size:64px; margin-top:18px; }
.emoji.huge{ font-size:76px; }

.tap{
  margin-top:8px;
  font-size:18px;
  font-weight:900;
  animation: tapPulse 0.7s infinite ease-in-out alternate;
}
@keyframes tapPulse{
  from{ transform:scale(1.0); }
  to{ transform:scale(1.25); }
}
.upgrade-grade{ font-size:38px; font-weight:900; margin:10px 0 0; }
.upgrade-area{
  margin-top:18px;
  width:min(640px, 92vw);
  height:min(520px, 70vh);
  border:3px solid #fff;
  border-radius:14px;
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;
}
.upgrade-holder{ display:flex; gap:18px; align-items:center; justify-content:center; }
.upgrade-emoji{ font-size:78px; }
.upgrade-emoji.big{ font-size:118px; }
.upgrade-dots{
  position:absolute;
  bottom:22px;
  left:50%;
  transform:translateX(-50%);
  font-size:18px;
  font-weight:900;
}

.tabs{ display:flex; gap:10px; margin-top:6px; }
.tab{
  border:2px solid #fff;
  background:#fff;
  color:#000;
  border-radius:12px;
  padding:10px 14px;
  font-weight:900;
  cursor:pointer;
}
.tab.active{ background:yellow; }

.equip-grid{
  margin-top:18px;
  width:min(720px, 94vw);
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:14px;
  align-items:start;
  justify-items:center;
}
.slot{
  width:180px; height:180px;
  border:3px solid #fff;
  border-radius:14px;
  position:relative;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}
.slot .slot-emoji{ font-size:46px; }
.slot .slot-name{ position:absolute; bottom:14px; font-size:12px; font-weight:900; text-align:center; padding:0 8px; }
.slot .slot-lvl{ position:absolute; right:10px; top:8px; font-size:12px; font-weight:900; }
.slot .slot-status{ position:absolute; bottom:6px; font-size:10px; font-weight:900; opacity:.95; }

.modal{
  position:absolute; inset:0;
  background: rgba(0,0,0,.8);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:18px;
}
.modal-card{
  width:min(860px, 96vw);
  background: var(--green);
  color:#fff;
  border:3px solid #fff;
  border-radius:16px;
  padding:16px;
}
.modal-top{
  display:flex;
  align-items:center;
  gap:12px;
}
.modal-title{ font-size:22px; font-weight:900; flex:1; text-align:center; }
.modal-body{
  display:flex;
  gap:16px;
  margin-top:12px;
  align-items:flex-start;
}
.modal-left{ width:360px; max-width:40vw; text-align:center; }
.modal-big{ font-size:90px; margin-top:8px; }
.modal-desc{ font-size:14px; font-weight:800; opacity:.95; margin-top:10px; white-space:pre-line; }
.modal-right{ flex:1; font-size:18px; font-weight:900; line-height:1.9; white-space:pre-line; }
.modal-actions{
  display:flex;
  justify-content:space-between;
  margin-top:14px;
}

.overlay{
  position:absolute; inset:0;
  background: rgba(0,0,0,.85);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:18px;
}
.overlay-card{
  width:min(520px, 94vw);
  border:3px solid #fff;
  border-radius:16px;
  padding:18px;
  background: transparent;
  color:#fff;
  text-align:center;
}
.overlay-msg{ font-size:18px; font-weight:900; white-space:pre-line; margin:14px 0; }
.overlay-actions{ display:flex; gap:14px; justify-content:center; }

#screenBattle{ background:#fff; padding:0; }
#battleCanvas{ width:100%; height:100%; display:block; }
.battle-home{
  position:absolute;
  right:16px; bottom:16px;
}
